# Frontend overview

Веб-часть построена на Next.js. Корневая страница (`/`) служит временным лендингом и содержит ссылки на основные экраны приложения.

## Навигация
- `/wireframes/owner` — кабинет владельца (wireframe)
- `/wireframes/verifier` — кабинет верификатора (wireframe)
- `/wireframes/recipient` — вид получателя (wireframe)

## Отладка
- `/playground` — минимальный UI для ручного теста API
- `http://localhost:3000/docs` — Swagger UI бэкенда (порт можно изменить переменной `PORT` при запуске API)

Неиспользуемые заглушки и моковые данные удалены из исходников.

## API и CORS
Бэкенд включает CORS с поддержкой куки. Для корректной работы фронтенда:
- домен приложения должен присутствовать в переменной окружения `CORS_ALLOWED_ORIGINS` на API;
- запросы к API выполняйте с `credentials: 'include'` (или `withCredentials: true` в axios).

## Роли
- **Owner** — владелец сейфа.
- **Verifier** — подтверждает события.
- **Recipient** — получает данные.
- **Admin** — управляет сервисом через `/adm`.

## Авторизация ролей
Страницы `/dev/owner` и `/dev/verifier` доступны только после проверки токена через `/auth/me`. При отсутствии cookie сессии пользователь перенаправляется на `/dev/login`. На клиенте компоненты дополнительно сверяют роль и, если она не соответствует странице, показывают сообщение «Доступ запрещён».

## Перезапуск seed
Повторно заполнить БД можно так:
```bash
gh workflow run seed -f confirm=prod
```

## Basic-auth
Админский раздел `/adm` защищён Basic‑auth. Формат заголовка:

```
Authorization: Basic <base64(email:password)>
```

Используйте учётные данные администратора из таблицы `user` (role `Admin`).

Для входа существует страница `/adm/login`.
Форма отправляет данные на `/auth/login`,
при успешном ответе с ролью `Admin`
устанавливает cookie `auth=<base64(email:password)>`
и перенаправляет на `/adm`.

Выйти из админки можно через `/adm/logout`,
который очищает cookie `auth`
и переадресует обратно на `/adm/login`.
